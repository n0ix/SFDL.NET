<Controls:MetroWindow x:Class="MainWindow"
                      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                      xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
                      xmlns:Dialog="clr-namespace:MahApps.Metro.Controls.Dialogs;assembly=MahApps.Metro"
                      xmlns:System="clr-namespace:System;assembly=mscorlib"
                      xmlns:p="clr-namespace:SFDL.NET3.My.Resources"
                      x:Name="SFDL_MainWindow"
                      Title="SFDL.NET 3"
                      Width="793.136"
                      Height="518.78"
                      Dialog:DialogParticipation.Register="{Binding}"
                      BorderBrush="Black"
                      BorderThickness="1"
                      SizeToContent="WidthAndHeight">
    <StackPanel>
        <Menu x:Name="MainMenu">
            <MenuItem Header="{x:Static p:Strings.MainMenu_File}">
                <MenuItem.Icon>
                    <Image Width="32"
                           Height="32"
                           Source="Resources/Icons/appbar.tiles.four.png" />
                </MenuItem.Icon>
                <MenuItem x:Name="cmd_open_file"
                          Command="{Binding OpenSFDLCommand}"
                          Header="{x:Static p:Strings.MainMenu_File_OpenFile}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.folder.open.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem x:Name="cmd_Settings"
                          Command="{Binding ShowSettingsDialogCommand}"
                          Header="{x:Static p:Strings.MainMenu_File_Settings}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.cog.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem x:Name="cmd_exit_app"
                          Command="{Binding ExitApplicationCommand}"
                          Header="{x:Static p:Strings.MainMenu_File_Exit}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.power.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

            <MenuItem Header="{x:Static p:Strings.MainMenu_Modify}">
                <MenuItem.Icon>
                    <Image Width="32"
                           Height="32"
                           Source="Resources/Icons/appbar.edit.png" />
                </MenuItem.Icon>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modify_RemoveAllCompletedDownloads}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.close.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modify_CloseAlleDownloads}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.delete.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modify_CloseSFDLFile}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.page.delete.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modifiy_MarkAllFiles}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.checkmark.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modifiy_UnmarkAllFiles}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.checkmark.uncrossed.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <Separator />
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modifiy_CollapeseAllPackages}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.arrow.collapsed.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Modifiy_ExpandAllPackages}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.arrow.expand.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{x:Static p:Strings.MainMenu_Extra}">
                <MenuItem.Icon>
                    <Image Width="32"
                           Height="32"
                           Source="Resources/Icons/appbar.star.png" />
                </MenuItem.Icon>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Extra_AfterDownload}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.door.leave.png" />
                    </MenuItem.Icon>
                    <MenuItem Header="{x:Static p:Strings.MainMenu_Extra_AfterDownload_ExitLoader}" IsCheckable="True">
                        <MenuItem.Icon>
                            <Image Width="32"
                                   Height="32"
                                   Source="Resources/Icons/appbar.power.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{x:Static p:Strings.MainMenu_Extra_AfterDownload_ShutdownComputer}" IsCheckable="True">
                        <MenuItem.Icon>
                            <Image Width="32"
                                   Height="32"
                                   Source="Resources/Icons/appbar.monitor.delete.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{x:Static p:Strings.MainMenu_Help}">
                <MenuItem.Icon>
                    <Image Width="32"
                           Height="32"
                           Source="Resources/Icons/appbar.book.perspective.help.png" />
                </MenuItem.Icon>
                <MenuItem Header="{x:Static p:Strings.MainMenu_Help}">
                    <MenuItem.Icon>
                        <Image Width="32"
                               Height="32"
                               Source="Resources/Icons/appbar.information.circle.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>

        </Menu>
        <ToolBar x:Name="MainToolBar">
            <Image Width="32"
                   Height="32"
                   Source="Resources/Icons/appbar.control.play.png" />
            <Button Command="{Binding StartDownloadCommand}"
                    Content="{x:Static p:Strings.MainToolBar_StartDownload}"
                    IsEnabled="{Binding ButtonDownloadStartEnabled}" />
            <Image Width="32"
                   Height="32"
                   Source="Resources/Icons/appbar.control.stop.png" />
            <Button Content="{x:Static p:Strings.MainToolBar_StopDownload}" IsEnabled="{Binding ButtonDownloadStopEnabled}" />
            <Separator />
            <Button Content="{x:Static p:Strings.MainToolbar_InstandVideo}" IsEnabled="{Binding ButtonInstantVideoEnabled}" />
            <Separator />
            <TextBox Controls:TextBoxHelper.UseFloatingWatermark="True" Controls:TextBoxHelper.Watermark="Max KB/s" />

        </ToolBar>
        <ListView x:Name="ListView_DownloadItems"
                  Height="396"
                  ItemsSource="{Binding DownloadItems}">
            <ListView.View>
                <GridView>
                    <GridViewColumn>
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox IsChecked="{Binding isSelected}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                    <GridViewColumn Width="150"
                                    DisplayMemberBinding="{Binding FileName}"
                                    Header="{x:Static p:Strings.ListView_DownloadItems_Header_Filename}" />
                    <GridViewColumn Width="150"
                                    DisplayMemberBinding="{Binding FileSize}"
                                    Header="{x:Static p:Strings.ListView_DownloadItems_Header_Filesize}" />
                    <GridViewColumn Width="100" Header="{x:Static p:Strings.ListView_DownloadItems_Header_Progress}">

                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <ProgressBar Maximum="100" Value="{Binding DownloadProgress}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>

                    </GridViewColumn>
                    <GridViewColumn Width="100"
                                    DisplayMemberBinding="{Binding DownloadStatus}"
                                    Header="{x:Static p:Strings.ListView_DownloadItems_Header_Status}" />
                    <GridViewColumn DisplayMemberBinding="{Binding DownloadSpeed}" Header="{x:Static p:Strings.ListView_DownloadItems_Header_Speed}" />
                </GridView>
            </ListView.View>

            <ListView.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="{x:Type GroupItem}">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate>
                                        <Expander IsExpanded="True">
                                            <Expander.Header>
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock VerticalAlignment="Bottom"
                                                               FontSize="12"
                                                               FontWeight="Bold"
                                                               Foreground="White"
                                                               Text="{Binding Name}" />
                                                </StackPanel>
                                            </Expander.Header>
                                            <ItemsPresenter />
                                        </Expander>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ListView.GroupStyle>

        </ListView>
        <Expander x:Name="Expander_Tasks" Header="{x:Static p:Strings.Expander_Header_Tasks}">
            <ListView x:Name="ListViewTasks"
                      Height="100"
                      ItemsSource="{Binding ActiveTasks}">
                <ListView.View>
                    <GridView AllowsColumnReorder="False">
                        <GridViewColumn Width="30">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <Image Height="20" Source="{Binding TaskStatusImage}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Width="150"
                                        DisplayMemberBinding="{Binding TaskDisplayText}"
                                        Header="Task" />
                    </GridView>
                </ListView.View>
            </ListView>
        </Expander>
        <StatusBar x:Name="MainStatusBar" />
    </StackPanel>
</Controls:MetroWindow>
